     1                                  SECTION .sys_tables
     2                                  ; Direcciones LMA y VMA
     3                                  EXTERN __SYS_TABLES_LMA
     4                                  EXTERN __TECLADO_ISR_VMA
     5                                  ; Etiquetas globales
     6                                  GLOBAL  DS_SEL_00
     7                                  GLOBAL  CS_SEL_00
     8                                  GLOBAL  DS_SEL_11
     9                                  GLOBAL  CS_SEL_11
    10                                  GLOBAL  DS_SEL_SS
    11                                  GLOBAL  TSS_SEL
    12                                  GLOBAL  _gdtr_32
    13                                  GLOBAL  _idtr_32
    14                                  GLOBAL  IDT
    15                                  ; Parte baja de direcciones de los handlers
    16                                  EXTERN L_ISR00_Handler_DE
    17                                  EXTERN L_ISR01_Handler_DB
    18                                  EXTERN L_ISR02_Handler_NMI
    19                                  EXTERN L_ISR03_Handler_BP
    20                                  EXTERN L_ISR04_Handler_OF
    21                                  EXTERN L_ISR05_Handler_BR
    22                                  EXTERN L_ISR06_Handler_UD
    23                                  EXTERN L_ISR07_Handler_NM
    24                                  EXTERN L_ISR08_Handler_DF
    25                                  EXTERN L_ISR10_Handler_TS
    26                                  EXTERN L_ISR11_Handler_NP
    27                                  EXTERN L_ISR12_Handler_SS
    28                                  EXTERN L_ISR13_Handler_GP
    29                                  EXTERN L_ISR14_Handler_PF
    30                                  EXTERN L_ISR16_Handler_MF
    31                                  EXTERN L_ISR17_Handler_AC
    32                                  EXTERN L_ISR18_Handler_MC
    33                                  EXTERN L_ISR19_Handler_XM
    34                                  EXTERN L_IRQ00_Handler
    35                                  EXTERN L_IRQ01_Handler
    36                                  EXTERN L_ISR128_Handler_SC
    37                                  ; Parte alta de las direcciones de los Handlers
    38                                  H_ISRXX_Handler     EQU 0x0010
    39                                  
    40                                  ;-------------------GDT 32 BITS ----------------
    41                                  ;Cada descriptor tiene 8 bytes.
    42                                  GDT_32:
    43                                  NULL_SEL    equ $-GDT_32       ;Indice de GDT = 0x00
    44 00000000 0000000000000000            dq 0x0
    45                                  
    46                                  CS_SEL_16       equ $-GDT_32       ;0x08
    47 00000008 FFFF                        dw 0xFFFF       ;Limit 15-0
    48 0000000A 0000                        dw 0x0000       ;Base 15-0
    49 0000000C FF                          db 0xFF         ;Base 23-16
    50 0000000D 99                          db 10011001b    ;Atributos:
    51                                                      ;P
    52                                                      ;DPL
    53                                                      ;S
    54                                                      ;D/C
    55                                                      ;ED/C
    56                                                      ;R/w
    57                                                      ;A
    58 0000000E 40                          db 01000000b    ;Limit
    59                                                      ;G
    60                                                      ;D/B
    61                                                      ;L
    62                                                      ;AVL
    63 0000000F FF                          db 0xFF         ;Base 31-24
    64                                  
    65                                  CS_SEL_00   equ $-GDT_32       ;Indice de GDT = 0x10
    66 00000010 FFFF                        dw 0xFFFF       ;Limit 15-0
    67 00000012 0000                        dw 0x0000       ;Base 15-0
    68 00000014 00                          db 0x00         ;Base 23-16
    69 00000015 99                          db 10011001b    ;Atributos:                   
    70                                                          ;P=1 Presente en el segmento
    71                                                          ;DPL=00 Privilegio nivel 0 - Kernel
    72                                                          ;S=1 Descriptor de Codigo/Datos        
    73                                                          ;D/C=1 Segmento de Codigo 
    74                                                          ;C=0 No puede ser invocado
    75                                                          ;R=0 No legible
    76                                                          ;A=1 por defecto Accedido
    77 00000016 CF                          db 11001111b    ;Limit 19-16 (Parte baja)
    78                                                      ;Parte alta:
    79                                                          ;G=1 Maximo offset = Limite*0x1000+0xFFF
    80                                                          ;D/B=1 Big, Segmento de 32
    81                                                          ;L=0 No 64 bits nativo
    82                                                          ;AVL=0 No utilizado
    83 00000017 00                          db 0x00         ;Base
    84                                  DS_SEL_00      equ $-GDT_32       ;Indice de GDT = 0x20
    85 00000018 FFFF                        dw 0xFFFF       ;Limit 15-0
    86 0000001A 0000                        dw 0x0000       ;Base 15-0
    87 0000001C 00                          db 0x00         ;Base 23-16
    88 0000001D 92                          db 10010010b    ;Atributos:
    89                                                          ;P=1 Presente en el segmento
    90                                                          ;DPL=00 Privilegio nivel 0 - Kernel
    91                                                          ;S=1 Descriptor de Codigo/Datos                        
    92                                                          ;D/C=0 Segmento de Datos 
    93                                                          ;ED=0 Segmento de datos comun
    94                                                          ;W=1 Escribible
    95                                                          ;A=0 por defecto No Accedido
    96 0000001E CF                          db 11001111b    ;Limit
    97                                                      ;G
    98                                                      ;D/B
    99                                                      ;L
   100                                                      ;AVL
   101 0000001F 00                          db 0x00         ;Base
   102                                  
   103                                  CS_SEL_11      equ $-GDT_32       ;Indice de GDT = 0x30
   104 00000020 FFFF                        dw 0xFFFF       ;Limit 15-0
   105 00000022 0000                        dw 0x0000       ;Base 15-0
   106 00000024 00                          db 0x00         ;Base 23-16
   107 00000025 FA                          db 11111010b    ;Atributos:
   108                                                          ;P=1 Presente en el segmento
   109                                                          ;DPL=11   nivel 3 - Usuario
   110                                                          ;S=1 Descriptor de Codigo/Datos                        
   111                                                          ;D/C=1 Segmento de CÃ³digo 
   112                                                          ;ED=0 Segmento de datos comun
   113                                                          ;R=1 Legible
   114                                                          ;A=0 por defecto No Accedido
   115 00000026 CF                          db 11001111b    ;Limit
   116                                                      ;G
   117                                                      ;D/B
   118                                                      ;L
   119                                                      ;AVL
   120 00000027 00                          db 0x00         ;Base
   121                                  
   122                                  
   123                                  DS_SEL_11      equ $-GDT_32       ;Indice de GDT = 0x20
   124 00000028 FFFF                        dw 0xFFFF       ;Limit 15-0
   125 0000002A 0000                        dw 0x0000       ;Base 15-0
   126 0000002C 00                          db 0x00         ;Base 23-16
   127 0000002D F2                          db 11110010b    ;Atributos:
   128                                                          ;P=1 Presente en el segmento
   129                                                          ;DPL=00 Privilegio nivel 0 - Kernel
   130                                                          ;S=1 Descriptor de Codigo/Datos                        
   131                                                          ;D/C=0 Segmento de Datos 
   132                                                          ;ED=0 Segmento de datos comun
   133                                                          ;W=1 Escribible
   134                                                          ;A=0 por defecto No Accedido
   135 0000002E CF                          db 11001111b    ;Limit
   136                                                      ;G
   137                                                      ;D/B
   138                                                      ;L
   139                                                      ;AVL
   140 0000002F 00                          db 0x00         ;Base
   141                                  
   142                                  
   143                                  TSS_SEL equ $-GDT_32          ;Base 0x00001000 Limite 0x00000067
   144 00000030 6700                        dw  0x0067                ;Limite del segmento(bits 15 -0)
   145 00000032 0010                        dw  0x1000                ;Base del segmento(bits 15-0)
   146 00000034 00                          db  0                     ;Base del segmento(bits 23-16)
   147 00000035 89                          db  10001001b             ; Atributos
   148                                                                    ; P=1 Presente en el segmento
   149                                                                    ; DPL = 00 Privilegio nivel 0 - Kernel
   150                                                                    ; S = 0 (Descriptor de TSS)
   151                                                                    ; TIPO = 1 0 B 1 siendo B = Busy y queda en 0 (Avaibable)
   152 00000036 00                          db  00000000b             ; G = 0, D/B = 0, L = 0 , AVL = 0 
   153                                                                ; LÃ­mite del segmento (bits 16 - 19)
   154 00000037 00                          db  0x00                  ; Base del segmento(bits 31-24)    
   155                                  
   156                                  
   157                                  DS_SEL_SS equ $-GDT_32          
   158 00000038 FFFF                        dw  0xFFFF                  
   159 0000003A 0000                        dw  0                       
   160 0000003C 00                          db  0                       
   161 0000003D 12                          db  0x12                    
   162 0000003E CF                          db  0xCF                    
   163 0000003F 00                          db  0x00 
   164                                  
   165                                  
   166                                  GDT_LENGTH EQU $-GDT_32
   167                                  
   168                                  _gdtr_32:
   169 00000040 3F00                        dw GDT_LENGTH-1
   170                                      ;dd 0x000FFD00 ; Base de la GDT en la section sys_tables. No van todas FFF al principio por el shadow.  
   171 00000042 [00000000]                  dd GDT_32 ; Base de la GDT en la section sys_tables. Use o32 cuando la cargo en init16.  
   172                                  
   173                                  
   174                                  ;-------------------------IDT 32 BITS---------------------
   175                                  
   176                                  ; Cada descriptor tiene 8 bytes.
   177                                  IDT:
   178                                  ; Divide Error
   179                                  ISR00_IDT   EQU $-IDT   
   180 00000046 [0000]                      dw L_ISR00_Handler_DE                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   181                                  
   182 00000048 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   183                                  
   184 0000004A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   185 0000004B 8F                          db 10001111b                                ; 1 byte - Atributos
   186                                                                                      ; P = 1 (Presente en el segmento)
   187                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   188                                                                                      ; S = 0 (Descriptor de sistema)
   189                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   190 0000004C 1000                        dw H_ISRXX_Handler       ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   191                                  ; Debug Exceptions - Reservada 
   192                                  ISR01_IDT   EQU $-IDT   
   193 0000004E 0000000000000000            dq 0x0
   194                                  ; NMI
   195                                  ISR02_IDT   EQU $-IDT   
   196                                  
   197 00000056 [0000]                      dw L_ISR02_Handler_NMI                      ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   198 00000058 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   199                                  
   200 0000005A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   201 0000005B 8F                          db 10001111b                                ; 1 byte - Atributos
   202                                                                                      ; P = 1 (Presente en el segmento)
   203                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   204                                                                                      ; S = 0 (Descriptor de sistema)
   205                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   206 0000005C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   207                                  ; Breakpoint
   208                                  ISR03_IDT   EQU $-IDT   
   209 0000005E [0000]                      dw L_ISR03_Handler_BP                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   210 00000060 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   211                                  
   212 00000062 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   213 00000063 8F                          db 10001111b                                ; 1 byte - Atributos
   214                                                                                      ; P = 1 (Presente en el segmento)
   215                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   216                                                                                      ; S = 0 (Descriptor de sistema)
   217                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   218 00000064 1000                        dw H_ISRXX_Handler                           ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   219                                  ; Overflow
   220                                  ISR04_IDT   EQU $-IDT   
   221 00000066 [0000]                      dw L_ISR04_Handler_OF                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   222 00000068 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   223                                  
   224 0000006A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   225 0000006B 8F                          db 10001111b                                ; 1 byte - Atributos
   226                                                                                      ; P = 1 (Presente en el segmento)
   227                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   228                                                                                      ; S = 0 (Descriptor de sistema)
   229                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   230 0000006C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   231                                  ; BOUND Range Exceeded
   232                                  ISR05_IDT   EQU $-IDT   
   233 0000006E [0000]                      dw L_ISR05_Handler_BR                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   234 00000070 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   235                                  
   236 00000072 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   237 00000073 8F                          db 10001111b                                ; 1 byte - Atributos
   238                                                                                      ; P = 1 (Presente en el segmento)
   239                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   240                                                                                      ; S = 0 (Descriptor de sistema)
   241                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   242 00000074 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   243                                  ; Invalid Opcode (Undefined Opcode)
   244                                  ISR06_IDT   EQU $-IDT   
   245 00000076 [0000]                      dw L_ISR06_Handler_UD                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   246 00000078 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   247                                  
   248 0000007A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   249 0000007B 8F                          db 10001111b                                ; 1 byte - Atributos
   250                                                                                      ; P = 1 (Presente en el segmento)
   251                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   252                                                                                      ; S = 0 (Descriptor de sistema)
   253                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   254 0000007C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   255                                  ; Device Not Available (No Math Coprocessor)
   256                                  ISR07_IDT   EQU $-IDT   
   257 0000007E [0000]                      dw L_ISR07_Handler_NM                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   258 00000080 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   259                                  
   260 00000082 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   261 00000083 8F                          db 10001111b                                ; 1 byte - Atributos
   262                                                                                      ; P = 1 (Presente en el segmento)
   263                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   264                                                                                      ; S = 0 (Descriptor de sistema)
   265                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   266 00000084 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   267                                  ; Double Fault
   268                                  ISR08_IDT   EQU $-IDT   
   269 00000086 [0000]                      dw L_ISR08_Handler_DF                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   270 00000088 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   271                                  
   272 0000008A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   273 0000008B 8F                          db 10001111b                                ; 1 byte - Atributos
   274                                                                                      ; P = 1 (Presente en el segmento)
   275                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   276                                                                                      ; S = 0 (Descriptor de sistema)
   277                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   278 0000008C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   279                                  ; Coprocessor Segment Overrun (reserved)
   280                                  ISR09_IDT   EQU $-IDT   
   281 0000008E 0000000000000000            dq 0x0
   282                                  ; Invalid TSS
   283                                  ISR10_IDT   EQU $-IDT   
   284 00000096 [0000]                      dw L_ISR10_Handler_TS                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   285 00000098 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   286                                  
   287 0000009A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   288 0000009B 8F                          db 10001111b                                ; 1 byte - Atributos
   289                                                                                      ; P = 1 (Presente en el segmento)
   290                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   291                                                                                      ; S = 0 (Descriptor de sistema)
   292                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   293 0000009C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   294                                  ; Segment Not Present
   295                                  ISR11_IDT   EQU $-IDT   
   296 0000009E [0000]                      dw L_ISR11_Handler_NP                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   297 000000A0 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   298                                  
   299 000000A2 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   300 000000A3 8F                          db 10001111b                                ; 1 byte - Atributos
   301                                                                                      ; P = 1 (Presente en el segmento)
   302                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   303                                                                                      ; S = 0 (Descriptor de sistema)
   304                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   305 000000A4 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   306                                  ; Stack-Segment Fault
   307                                  ISR12_IDT   EQU $-IDT   
   308 000000A6 [0000]                      dw L_ISR12_Handler_SS                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   309 000000A8 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   310                                  
   311 000000AA 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   312 000000AB 8F                          db 10001111b                                ; 1 byte - Atributos
   313                                                                                      ; P = 1 (Presente en el segmento)
   314                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   315                                                                                      ; S = 0 (Descriptor de sistema)
   316                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   317 000000AC 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   318                                  ; General Protection
   319                                  ISR13_IDT   EQU $-IDT   
   320 000000AE [0000]                      dw L_ISR13_Handler_GP                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   321 000000B0 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   322                                  
   323 000000B2 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   324 000000B3 8F                          db 10001111b                                ; 1 byte - Atributos
   325                                                                                      ; P = 1 (Presente en el segmento)
   326                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   327                                                                                      ; S = 0 (Descriptor de sistema)
   328                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   329 000000B4 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   330                                  ; Page Fault
   331                                  ISR14_IDT   EQU $-IDT   
   332 000000B6 [0000]                      dw L_ISR14_Handler_PF                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   333 000000B8 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   334                                  
   335 000000BA 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   336 000000BB 8F                          db 10001111b                                ; 1 byte - Atributos
   337                                                                                      ; P = 1 (Presente en el segmento)
   338                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   339                                                                                      ; S = 0 (Descriptor de sistema)
   340                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   341 000000BC 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   342                                  ; (Intel reserved. Do not use.)
   343                                  ISR15_IDT   EQU $-IDT   
   344 000000BE 0000000000000000            dq 0x0
   345                                  ; x87 FPU Floating-Point Error (Math Fault)
   346                                  ISR16_IDT   EQU $-IDT   
   347 000000C6 [0000]                      dw L_ISR16_Handler_MF                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   348 000000C8 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   349                                  
   350 000000CA 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   351 000000CB 8F                          db 10001111b                                ; 1 byte - Atributos
   352                                                                                      ; P = 1 (Presente en el segmento)
   353                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   354                                                                                      ; S = 0 (Descriptor de sistema)
   355                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   356 000000CC 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   357                                  ; Alignment Check
   358                                  ISR17_IDT   EQU $-IDT   
   359 000000CE [0000]                      dw L_ISR17_Handler_AC                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   360 000000D0 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   361                                  
   362 000000D2 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   363 000000D3 8F                          db 10001111b                                ; 1 byte - Atributos
   364                                                                                      ; P = 1 (Presente en el segmento)
   365                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   366                                                                                      ; S = 0 (Descriptor de sistema)
   367                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   368 000000D4 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   369                                  ; Machine Check
   370                                  ISR18_IDT   EQU $-IDT   
   371 000000D6 [0000]                      dw L_ISR18_Handler_MC                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   372 000000D8 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   373                                  
   374 000000DA 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   375 000000DB 8F                          db 10001111b                                ; 1 byte - Atributos
   376                                                                                      ; P = 1 (Presente en el segmento)
   377                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   378                                                                                      ; S = 0 (Descriptor de sistema)
   379                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   380 000000DC 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   381                                  ; SIMD Floating-Point Exception
   382                                  ISR19_IDT   EQU $-IDT   
   383 000000DE [0000]                      dw L_ISR19_Handler_XM                       ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   384 000000E0 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   385                                  
   386 000000E2 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   387 000000E3 8F                          db 10001111b                                ; 1 byte - Atributos
   388                                                                                      ; P = 1 (Presente en el segmento)
   389                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   390                                                                                      ; S = 0 (Descriptor de sistema)
   391                                                                                      ; TIPO = 1111 (Puerta de Excepcion de 32 bits 80386 - Trap Gate)
   392 000000E4 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   393                                  ; Virtualization Exception (20) hasta Intel reserver. Do not use (31) todo reservado.
   394                                  ISR20to31_idt EQU $-IDT
   395 000000E6 0000000000000000-           times 12 dq 0x0  
   395 000000E6 <rept>             
   396                                  ; IRQ0 - Timer tick
   397                                  ISR32_IRQ_0 EQU $-IDT
   398 00000146 [0000]                      dw L_IRQ00_Handler                          ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   399 00000148 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   400                                  
   401 0000014A 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   402 0000014B 8E                          db 10001110b                                ; 1 byte - Atributos
   403                                                                                      ; P = 1 (Presente en el segmento)
   404                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   405                                                                                      ; S = 0 (Descriptor de sistema)
   406                                                                                      ; TIPO = 1110 (Puerta de InterrupciÃ³n de 32 bits 80386 - Int. Gate)
   407 0000014C 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   408                                  ; IRQ1 - KBI (Keyboard Interrupt)
   409                                  ISR33_IRQ_1 EQU $-IDT
   410 0000014E [0000]                      dw L_IRQ01_Handler                          ; 2 bytes - Offset 15-0 - Segmento de referencia al cÃ³digo de la EXCEPTION 
   411 00000150 1000                        dw CS_SEL_00                                ; 2 bytes - Selector de segmento de cÃ³digo
   412                                  
   413 00000152 00                          db 00000000b                                ; 1 byte - 000 e indefinido
   414 00000153 8E                          db 10001110b                                ; 1 byte - Atributos
   415                                                                                      ; P = 1 (Presente en el segmento)
   416                                                                                      ; DPL = 00 (Nivel de privilegio priotidad Kernel)
   417                                                                                      ; S = 0 (Descriptor de sistema)
   418                                                                                      ; TIPO = 1110 (Puerta de InterrupciÃ³n de 32 bits 80386 - Int. Gate)
   419 00000154 1000                        dw H_ISRXX_Handler                          ; 2 bytes - Offset 31-16 - Segmento de referencia al cÃ³digo de la EXCEPTION
   420                                  
   421                                  ISR34to46_idt EQU $-IDT   
   422 00000156 0000000000000000-           times 13 dq 0x0000  ;Usuario
   422 00000156 <rept>             
   423                                         
   424                                  ISER47to127_idt EQU $ - IDT
   425 000001BE 0000000000000000-           times 81 dq 0x0000
   425 000001BE <rept>             
   426                                  
   427                                  ; Compuerta de interrupciÃ³n de system call.
   428                                  ISER128_idt EQU $ - IDT
   429 00000446 [0000]                      dw L_ISR128_Handler_SC              ;Offset 15-0
   430 00000448 1000                        dw CS_SEL_00                       ;Selector.
   431 0000044A 00                          db 0x00                             ;No usado.
   432 0000044B EE                          db 0xEE                             ;Compuerta de interrupciÃ³n. DPL = 11
   433 0000044C 1000                        dw H_ISRXX_Handler                  ;Offset 31-16
   434                                  
   435                                  
   436                                  IDT_LENGTH EQU $-IDT
   437                                  _idtr_32:
   438 0000044E 0704                        dw IDT_LENGTH-1
   439 00000450 [46000000]                  dd IDT       ; Base de la IDT donde termina la GDT para que esten una arriba de la otra en ROM
   440                                  
   441                                  
